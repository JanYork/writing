---
title: "DIY家庭云存储：照片备份、资料存储"
date: 2025-08-10 12:00:00
tags: [DIY, 工具]
categories: [DIY]
description: "如何搭建自己的家庭云存储系统，实现照片备份和资料存储，既保护数据安全又节省云存储费用。"
---

![banner](https://oss.fhub.cn/typora/202506171422192.png)

作为一个摄影爱好者，我的手机和相机中每天都会产生大量照片，久而久之，存储空间就成了一个大问题。云服务虽然方便，但付费空间不便宜，而且总让我对数据隐私有点不放心。

正因为这样，我起了个念头：不如自己搭一个家庭云，用来备份照片、同步笔记、播放影音、甚至跑点服务。一来能省钱，二来也更灵活自由。

### 为什么不买成品NAS？

很多人第一时间可能会想到直接买个成品NAS，比如群晖、威联通这些。但我没选，一方面成品NAS普遍价格偏高，另一方面限制太多，硬件升级和自定义配置不太方便。与其受制于封闭系统，不如自己动手，丰衣足食。于是，我踏上了DIY NAS的旅程。

### 公网访问是关键

但仅有NAS还不够。作为一个家庭云，它必须在外网（公网）可访问，总不能只能在家中使用，那就太鸡肋了。所以我还搭配了一台软路由设备，主要是为了提供IPv6公网访问能力。

虽然不是所有宽带都支持IPv6，但手机流量一般都支持，这样我不管在哪儿，只要使用流量，就能访问家里的网络。

### 我的设备清单与搭建过程

这一套设备是我慢慢攒齐的，下面列一下清单和大致价格（单位：人民币）：

基础工具：

- 六类国标网线15米：19.9
- 网线水晶头若干：8
- 多功能网线钳：60
- SATA数据线若干：20
- U盘（>8GB）：已有备用

软路由部分：

- Radxa E20C 铝壳套装（2G内存+16G存储）：200
- TF卡 32GB：18
- 20W PD充电头 + 数据线：25
- 中兴巡天路由器：130

家庭云存储部分：

- 西部数据1TB蓝盘 × 4：450
- 3D打印机箱 + 螺丝：110
- 蜗牛星际4盘位背板：60
- 全汉1U 300W模块化电源：80
- 12015规格 1400转风扇：12
- 128GB M.2固态硬盘：70
- 下压式39mm ITX散热器：53
- 英特尔12400T CPU：850
- 铭瑄 DDR4 3200MHz 16G内存：120
- 精粤 B760I GAMING ITX主板：435

这里要特别说明一下，12400T的CPU其实远超NAS场景的需求。一般用作NAS的CPU，比如N系列CPU（像N305、N5095）也就10-15W功耗，而12400T会大很多。但我选择它是因为，我不仅把这台机器当作NAS来用，更当作一个家庭服务器，所以性能必须跟得上。

### 网络架构怎么搭？

我家的宽带是500兆，我的组网结构大致是这样的：

1. 光猫桥接 → 软路由E20C的WAN口。
2. 在软路由OpenWRT系统中进行拨号（PPPoE）并放通IPv6防火墙。
3. 使用DDNS（动态域名解析），这样即使我不在家，也能访问软路由的管理界面。
4. NAS装上了飞牛NAS系统，软路由LAN口连到中兴路由器的WAN口，路由器LAN口与NAS的LAN口连接。
5. 把中兴路由器改成AP模式并关闭DHCP，整个家庭网络的IPv6就打通了。

这样一来，家里的设备既能访问IPv6网络，也能通过IPv6被远程访问。

### 网络暴露了，安全吗？

IPv6公网访问带来了便利，也带来了风险。为了安全，我在软路由上关闭了除了8088、4455（自定义服务端口）和几个NAS服务端口以外的所有端口。至于为什么是8088和4455端口，是因为很多运营商会封锁80、443等常用端口，所以我特意用8088和4455替代。

另外，我在NAS中用Docker部署了长亭雷池WAF作为安全网关，所有对外服务都会经过它过滤，基本可以放心。

### 应对没有IPv6的场景

不是每个地方都有IPv6，尤其是公司或者朋友家这种环境。我使用了“节点小宝”提供的组网服务作为备用方案，这样即使没有公网IP，也能远程访问家里的设备。

### 实测网速不错

我测试了一下在公共IPv6网络下的速度，下载速度峰值能到10MB&#x2F;s，上传约8MB&#x2F;s（注意单位是MB，不是Mbps），看高清电影毫无压力。如果换成千兆宽带，可能表现更好。当然，也有可能是我的手机流量本身上下行速度不够。

### 实际使用体验

搭好这一整套系统后，我的日常使用便利性提升了非常多：

- 照片备份更轻松：无论是相机还是手机拍的照片，我可以直接通过流量远程上传到家里，省掉一堆线和中间软件。
- 数据更安全：4块硬盘组成RAID1阵列（两组镜像），即便坏一块也不怕。
- 手机轻了：相机拍一张照片动不动十几二十MB，有了家庭云，手机存储轻松了不少。
- 科学网络连接：软路由自带“科学网络连接”能力，不用再使用软件来搭“梯子”了（挂后台耗电巨大）。
- 更强大的相册软件：无论是飞牛NAS系统自带的相册，还是我自行部署的MT-Photo程序，都提供了AI识别、人脸分析、模糊搜索等高级功能。比如输入“秋天的落叶”就能找到对应场景的照片，非常好用。
- 影音中心也搞定：这套系统可以流畅播放影音，配个电视盒子或者直接远程观看都可以，硬解4K60帧无压力。
- 笔记同步利器：我把Obsidian的数据库也部署在NAS上，用它同步我的所有笔记。比起收费的同步方案，它免费且插件丰富，甚至还能提取微信读书的笔记和标记，非常适合我这种内容型用户。

### 总结

总而言之，这一套配置给我带来了不少方便。

E20C作为软路由，温度控制非常好，30度左右，基本上感觉不到发热，当然，如果连接的设备非常多，或者是家庭成员较多的情况下，还是建议使用更高配置的设备来作为软路由比较好，且如果不想频繁断网的话，建议使用旁路模式。

12400T这款CPU我非常满意，他的待机功耗大概在30瓦左右，并不算高，而且处理数据的性能非常不错，核显运行AI相册识别毫无压力。

如果你也有类似需求，比如照片多、影音需求高、或者想要一个更自由的笔记备份方案，不妨试试自己搭建家庭NAS。虽然前期动手比较麻烦，但成品出来的那一刻真的成就感满满。关键是，自由、安全、高速，所有你想要的功能都可以自己掌控。

有兴趣的朋友可以参考我的配置和思路，也欢迎交流经验。玩的是存储，过的是生活。

我的家庭云状态监控：

![image](https://oss.fhub.cn/note/202506171423240.jpeg)
